<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FixYourSleep | Aludj jobban, √©lj jobban.</title>
    <style>
        /* DESIGN (CSS) - S√∂t√©t m√≥dra hangolva */
        :root {
            --bg-color: #0f172a; /* Nagyon s√∂t√©t k√©k/sz√ºrke */
            --card-bg: #1e293b;
            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            --accent: #38bdf8; /* Vil√°gosk√©k kiemel√©s */
            --accent-hover: #0ea5e9;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            width: 100%;
        }

        h1 { text-align: center; margin-bottom: 5px; color: var(--accent); }
        .subtitle { text-align: center; color: var(--text-muted); margin-bottom: 40px; font-size: 0.9em; }

        .card {
            background-color: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            margin-bottom: 30px;
        }

        label { display: block; margin-bottom: 10px; color: var(--text-muted); }
        
        input[type="time"] {
            width: 100%;
            padding: 15px;
            background: #0f172a;
            border: 1px solid #334155;
            color: white;
            border-radius: 8px;
            font-size: 1.2em;
            margin-bottom: 20px;
            box-sizing: border-box; /* Fontos a padding miatt */
        }

        button {
            width: 100%;
            padding: 15px;
            background-color: var(--accent);
            color: #0f172a;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1.1em;
            cursor: pointer;
            transition: background 0.2s;
        }

        button:hover { background-color: var(--accent-hover); }

        .result-box {
            margin-top: 20px;
            padding: 15px;
            background: rgba(56, 189, 248, 0.1);
            border-radius: 8px;
            text-align: center;
            display: none; /* Alapb√≥l rejtve */
        }

        .times-list {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--accent);
            margin: 10px 0;
        }

        /* DIAGNOSZTIKA ST√çLUSOK */
        .diag-step { display: none; } /* Alapb√≥l minden l√©p√©s rejtve */
        .diag-step.active { display: block; animation: fadeIn 0.5s; }

        .option-btn {
            background: #334155;
            color: white;
            margin-bottom: 10px;
            text-align: left;
        }
        .option-btn:hover { background: #475569; }

        /* AFFILIATE DOBOZOK */
        .affiliate-box {
            border: 1px solid var(--accent);
            padding: 15px;
            margin-top: 15px;
            border-radius: 8px;
            background: rgba(56, 189, 248, 0.05);
        }
        
        .affiliate-title { color: var(--accent); font-weight: bold; margin-bottom: 5px; display: block; }
        .affiliate-link { text-decoration: none; color: white; display: block; margin-top: 10px; font-weight: bold; text-decoration: underline;}

        .level-tabs {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            border-bottom: 1px solid #334155;
            padding-bottom: 10px;
        }
        .tab { 
            cursor: pointer; 
            color: var(--text-muted); 
            font-size: 0.9em; 
            flex: 1; 
            text-align: center;
        }
        .tab.active { color: var(--accent); border-bottom: 2px solid var(--accent); }
        
        .content-section { display: none; margin-top: 15px; font-size: 0.9em; line-height: 1.6; }
        .content-section.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>FixYourSleep<span style="color:white">.now</span></h1>
    <div class="subtitle">Ne legy√©l zombi. Hozd helyre a rutinod.</div>

    <div class="card">
        <h3>üí§ Mikor akarsz felkelni?</h3>
        <input type="time" id="wakeTime">
        <button onclick="calculateSleep()">Mikor fek√ºdjek le?</button>
        
        <div id="calcResult" class="result-box">
            <div>Ha ekkor akarsz frissen √©bredni, ekkor fek√ºdj le:</div>
            <div class="times-list" id="sleepTimes"></div>
            <div style="font-size: 0.8em; color: var(--text-muted)">90 perces alv√°si ciklusokkal sz√°molva (+15 perc elalv√°s).</div>
        </div>
    </div>

    <div class="card" id="diagnosticSection">
        <h3>üîß Alv√°s Diagnosztika</h3>
        <p style="color: var(--text-muted); font-size: 0.9em;">V√°laszolj 2 k√©rd√©sre a szem√©lyre szabott blueprinthez.</p>
        <hr style="border: 0; border-top: 1px solid #334155; margin: 20px 0;">

        <div id="step1" class="diag-step active">
            <label>Mi a legnagyobb bajod alv√°s k√∂zben?</label>
            <button class="option-btn" onclick="nextStep('hot')">ü•µ T√∫l melegem van / Izzadok</button>
            <button class="option-btn" onclick="nextStep('cold')">ü•∂ F√°zom / Hideg a l√°bam</button>
            <button class="option-btn" onclick="nextStep('pain')">ü§ï F√°j a nyakam / h√°tam</button>
            <button class="option-btn" onclick="nextStep('noise')">üîä Zavar a zaj / f√©ny</button>
            <button class="option-btn" onclick="nextStep('stress')">üß† T√∫l sokat agyalok / Stressz</button>
        </div>

        <div id="step2" class="diag-step">
            <label>Nemed? (A biol√≥gia miatt fontos)</label>
            <button class="option-btn" onclick="showResult('male')">F√©rfi</button>
            <button class="option-btn" onclick="showResult('female')">N≈ë</button>
        </div>

        <div id="finalResult" class="diag-step">
            <h2 style="color: var(--accent); margin-top:0;">A te "Blue-print"-ed:</h2>
            
            <div class="level-tabs">
                <div class="tab active" onclick="switchTab('quick')">‚ö° Gyors Tipp</div>
                <div class="tab" onclick="switchTab('science')">üß¨ Tudom√°ny</div>
                <div class="tab" onclick="switchTab('blueprint')">üìê Full Terv</div>
            </div>

            <div id="content-quick" class="content-section active">
                <p id="quickTipText">...</p>
                
                <div class="affiliate-box">
                    <span class="affiliate-title">üí° Aj√°nlott Eszk√∂z:</span>
                    <span id="productName">...</span>
                    <a href="#" id="productLink" class="affiliate-link" target="_blank">Megn√©zem az √°rat (Amazon/Alza) &rarr;</a>
                </div>
            </div>

            <div id="content-science" class="content-section">
                <p id="scienceText">...</p>
            </div>

            <div id="content-blueprint" class="content-section">
                <p>Itt van a teljes esti rutinod:</p>
                <ul id="blueprintList" style="padding-left: 20px;"></ul>
            </div>

            <button onclick="resetDiag()" style="margin-top: 20px; background: #334155;">√öjrakezd√©s</button>
        </div>
    </div>

    <div style="text-align: center; margin-top: 50px; font-size: 0.8em; color: #334155;">
        &copy; 2026 FixYourSleep. Nem orvosi tan√°cs.
    </div>
</div>

<script>
    /* ========================================
    LOGIKA R√âSZ
    ========================================
    */

    // 1. ALV√ÅS KALKUL√ÅTOR
    function calculateSleep() {
        const input = document.getElementById('wakeTime').value;
        if (!input) return;

        const [hours, minutes] = input.split(':').map(Number);
        const wakeDate = new Date();
        wakeDate.setHours(hours, minutes, 0);

        // Ha a megadott id≈ë m√°r elm√∫lt m√°ra, akkor holnapra sz√°molunk
        const now = new Date();
        if (wakeDate < now) {
            wakeDate.setDate(wakeDate.getDate() + 1);
        }

        // Visszasz√°mol√°s: 4, 5, 6 ciklus (90 perc) + 15 perc elalv√°s
        // 1 ciklus = 90 perc. 
        // 6 ciklus = 9 √≥ra, 5 ciklus = 7.5 √≥ra, 4 ciklus = 6 √≥ra.
        // + 15 perc, amit az √°gyban t√∂ltesz elalv√°s el≈ëtt.
        
        let resultHTML = "";
        
        // 6 ciklus (Legjobb)
        let time6 = new Date(wakeDate.getTime() - (9 * 60 * 60 * 1000) - (15 * 60 * 1000));
        // 5 ciklus (√Åtlagos)
        let time5 = new Date(wakeDate.getTime() - (7.5 * 60 * 60 * 1000) - (15 * 60 * 1000));
        // 4 ciklus (Minimum)
        let time4 = new Date(wakeDate.getTime() - (6 * 60 * 60 * 1000) - (15 * 60 * 1000));

        const format = (d) => d.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});

        resultHTML += `<div>${format(time6)} <span style="font-size:0.6em; color:#94a3b8">(9h alv√°s - Legjobb)</span></div>`;
        resultHTML += `<div>${format(time5)} <span style="font-size:0.6em; color:#94a3b8">(7.5h alv√°s - J√≥)</span></div>`;
        resultHTML += `<div>${format(time4)} <span style="font-size:0.6em; color:#94a3b8">(6h alv√°s - Minimum)</span></div>`;

        document.getElementById('sleepTimes').innerHTML = resultHTML;
        document.getElementById('calcResult').style.display = 'block';
    }

    // 2. DIAGNOSZTIKA LOGIKA
    let selectedIssue = '';
    let selectedGender = '';

    function nextStep(issue) {
        selectedIssue = issue;
        document.getElementById('step1').classList.remove('active');
        document.getElementById('step2').classList.add('active');
    }

    function showResult(gender) {
        selectedGender = gender;
        document.getElementById('step2').classList.remove('active');
        document.getElementById('finalResult').classList.add('active');
        
        generateContent();
    }

    function resetDiag() {
        document.getElementById('finalResult').classList.remove('active');
        document.getElementById('step1').classList.add('active');
        // Reset tabs
        switchTab('quick');
    }

    function switchTab(tabName) {
        // Tabok resetel√©se
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.content-section').forEach(c => c.classList.remove('active'));

        // Akt√≠v be√°ll√≠t√°sa
        event.target.classList.add('active');
        document.getElementById('content-' + tabName).classList.add('active');
    }

    // TARTALOM GENER√ÅTOR (ITT VAN A L√âNYEG √âS A P√âNZ!)
    function generateContent() {
        let quickTip = "";
        let science = "";
        let product = "";
        let productUrl = ""; // IDE KELL MAJD A LINKED
        let blueprint = [];

        // ESET: MELEG / IZZAD√ÅS
        if (selectedIssue === 'hot') {
            quickTip = "A testednek le kell h≈±lnie 1-2 fokot az elalv√°shoz. Te jelenleg 't√∫lf≈±tesz'.";
            science = "A m√©lyalv√°shoz (NREM) a magh≈ëm√©rs√©kletednek cs√∂kkennie kell. Ha meleged van, a szervezeted v√©rt pump√°l a b≈ër√∂dbe, hogy h≈±ts√∂n, ami √©bren tartja a sz√≠vedet √©s megakad√°lyozza a m√©ly alv√°st. K√ºl√∂n√∂sen igaz ez, ha " + (selectedGender === 'male' ? "magas a tesztoszteron szinted." : "a ciklusod lute√°lis f√°zis√°ban vagy.");
            product = "H≈±t≈ë zsel√©s p√°rna vagy v√©kony bambusz takar√≥";
            productUrl = "https://www.amazon.com/s?k=cooling+pillow"; // CSER√âLD LE A SAJ√ÅTODRA!
            blueprint = [
                "Lefekv√©s el≈ëtt 1 √≥r√°val: Szell≈ëztess, c√©l a 19-20 fok.",
                "Zuhany: Langyos v√≠z (nem hideg, mert az felp√∂rget).",
                "Ruha: Csak pamut vagy semmi. A m≈±sz√°lba beleizzadsz.",
                "Eszk√∂z: Haszn√°ld az aj√°nlott h≈±t≈ë p√°rn√°t."
            ];
        }
        
        // ESET: HIDEG
        else if (selectedIssue === 'cold') {
            quickTip = "Ha f√°zik a v√©gtagod (k√©z/l√°b), az agyad nem kapja meg a jelet a kikapcsol√°sra.";
            science = "Az elalv√°s paradoxona: A tested magh≈ëj√©nek cs√∂kkennie kell, de a v√©gtagjaidnak melegnek kell lenni√ºk (vazodilat√°ci√≥), hogy a h≈ë t√°vozhasson a k√∂zpontb√≥l. A hideg l√°b g√°tolja ezt a h≈ëcser√©t.";
            product = "S√∫lyozott takar√≥ (Weighted Blanket)";
            productUrl = "https://www.amazon.com/s?k=weighted+blanket"; // CSER√âLD LE!
            blueprint = [
                "Lefekv√©s el≈ëtt: Vegy√©l fel zoknit (igen, szexi, de m≈±k√∂dik).",
                "Ital: Forr√≥ gy√≥gytea (citromf≈± vagy kamilla).",
                "Eszk√∂z: A s√∫lyozott takar√≥ nem csak meleg√≠t, de a nyom√°s cs√∂kkenti a kortizolt."
            ];
        }

        // ESET: F√ÅJDALOM (NYAK/H√ÅT)
        else if (selectedIssue === 'pain') {
            quickTip = "A p√°rn√°d val√≥sz√≠n≈±leg nem tartja egyenesen a gerinced. Rossz poz√≠ci√≥ban alszol.";
            science = "Az alv√°s k√∂zbeni mikrokifordul√°sok megfesz√≠tik az izmokat. Az agyad nem tud m√©ly alv√°sba l√©pni, mert folyamatosan 'v√©di' a s√©r√ºl√©keny nyaki szakaszt a f√°jdalomjelz√©sek miatt.";
            product = "Ergon√≥miai Mem√≥riahabos P√°rna";
            productUrl = "https://www.amazon.com/s?k=ergonomic+pillow"; // CSER√âLD LE!
            blueprint = [
                "Poz√≠ci√≥: Ha h√°ton alszol, v√©konyabb p√°rna kell. Ha oldalt, vastagabb, hogy kit√∂ltse a v√°llad feletti teret.",
                "Ny√∫jt√°s: 2 perc nyakmozgat√°s lefekv√©s el≈ëtt.",
                "Eszk√∂z: Cser√©ld le a r√©gi tollp√°rn√°t mem√≥riahabra."
            ];
        }

        // ESET: ZAJ / F√âNY
        else if (selectedIssue === 'noise') {
            quickTip = "T√∫l √©ber vagy. A legkisebb inger is kiz√∂kkent.";
            science = "A modern k√∂rnyezet f√©nyszennyez√©se g√°tolja a melatonin (alv√°si hormon) termel√©s√©t. M√©g a LED standby f√©nye is bezavarhat a cirkadi√°n ritmusba.";
            product = "Min≈ës√©gi Alv√≥maszk + F√ºldug√≥ szett";
            productUrl = "https://www.amazon.com/s?k=sleep+mask"; // CSER√âLD LE!
            blueprint = [
                "S√∂t√©t√≠t√©s: Teljes s√∂t√©ts√©g (Blackout f√ºgg√∂ny vagy maszk).",
                "Zaj: Ha nem tudsz csendet csin√°lni, haszn√°lj 'White Noise' (feh√©r zaj) gener√°tort.",
                "Telefon: √âjszakai m√≥d bekapcsol√°sa 20:00-t√≥l."
            ];
        }

        // ESET: STRESSZ / AGYAL√ÅS
        else {
            quickTip = "A tested f√°radt, de az agyad p√∂r√∂g. Magas a kortizol szinted.";
            science = "A lefekv√©s el≈ëtti gondolatspir√°l b√©ta-hull√°mokban tartja az agyat. Neked alfa, majd th√©ta hull√°mokra van sz√ºks√©ged. A k√©k f√©ny √©s a stressz g√°tolja ezt az √°tmenetet.";
            product = "K√©kf√©ny-sz≈±r≈ë szem√ºveg (Est√©re)";
            productUrl = "https://www.amazon.com/s?k=blue+light+glasses"; // CSER√âLD LE!
            blueprint = [
                "Brain Dump: √çrd ki egy pap√≠rra a holnapi feladatokat (√≠gy az agyad elengedheti ≈ëket).",
                "L√©gz√©s: 4-7-8 technika (4 mp besz√≠v, 7 bent tart, 8 kif√∫j).",
                "Eszk√∂z: K√©kf√©ny szem√ºveg 2 √≥r√°val lefekv√©s el≈ëtt, ha mindenk√©pp g√©pezned kell."
            ];
        }

        // HTML BEILLESZT√âSE
        document.getElementById('quickTipText').innerText = quickTip;
        document.getElementById('scienceText').innerText = science;
        document.getElementById('productName').innerText = product;
        
        let linkElem = document.getElementById('productLink');
        linkElem.href = productUrl; // Itt √°ll√≠t√≥dik be a link
        
        let listHTML = "";
        blueprint.forEach(item => listHTML += `<li>${item}</li>`);
        document.getElementById('blueprintList').innerHTML = listHTML;
    }

</script>

</body>
</html>